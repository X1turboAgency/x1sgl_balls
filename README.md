# X1SGL Balls

X1turbo SGL Demo Balls

今回、New グラディウスデモを制作する上で、X1用のゲームライブラリとしてX1SGLという環境を用意しました。  
ソフトウェアスプライトやコンバータなどのプログラム制作環境です。  
  
X1SGLを使って描画性能用プログラム検証として、X1 Balls を作りました。  
16x16 プレーン1-3のスプライトを画面にどれくらい描画できるのかの検証プログラムです。

# 操作説明
キーボードで操作します。  
1…Ball (プレーン1)を一つ発生させる。  
2…Ball (プレーン2)を一つ発生させる。  
3…Ball (プレーン3)を一つ発生させる。  
4…Ballを一つ消去する。  
スペースバー…押すたびに 60/30/20fps を切り替えます。  
  
# 表示項目
現在表示しているBallの数  
現在の表示FPS (60/30/20)  
処理落ち (Dropout) フレーム内で描画処理をオーバーすると「Dropout」を表示します。  
ちなみに60/30/20fpsでBallの移動速度を変えて見た目の速度が変わらないようにしています。  

# セットアップ / 環境
想定環境: Windows (64bit)  

ビルドに必要な実行ファイルは内包していますが、z80アセンブラ本体は同梱していません。  
アセンブラは、紅茶羊羹さんの z80asmを想定しています。こちらは別途入手して下さい。  
z80as.exe を、bin/z80as フォルダにコピーして下さい。  

# ビルド方法
project/build.bat を実行すると、アセンブルを行って、x1balls.d88 を作成します。  
エミュレータや実機で実行する事ができます。  

# プロジェクト/ファイル説明

| フォルダ名       | サブフォルダ | 説明                                                   |
|------------------|--------------|--------------------------------------------------------|
| bin              |              | ツール類                                               |
|                  | make2d.exe   | アセンブル済み.binファイルを .2d形式に変換します。     |
|                  | png2mrg.exe  | PNG画像をアセンブルファイル(.asm)に変換します。        |
|                  | x12d_d88.exe | 2dファイルをd88ファイルへ変換します。                  |
| res              |              | 画像リソースフォルダ                                   |
|                  | chara        | キャラクタ画像データ asm ファイルに変換します。        |
| src              |              |                                                        |
|                  | bitline      | ビットライン関連のファイル                             |
|                  | chara        | キャラ画像データ / キャラ実行マネージャ                |
|                  | data_work    | データワーク                                           |
|                  | game         | game / ball処理                                        |
|                  | input        | キーボード / 入力処理                                  |
|                  | render       | 描画処理 (B/R/G)                                       |
|                  | text         | テキスト処理                                           |
|                  | util         | 各種ユーティリティ                                     |
| main.am          |              | メイン処理                                             |
| boot_data.asm    |              | ブート処理                                             |
| crtc.asm         |              | crtc設定処理                                           |
| prog_end.asm     |              | プログラム終了判定                                     |
| macro_define.asm |              | マクロ設定                                             |
| value_define.asm |              | ラベル記述                                             |

# 謝辞
このプログラムのアセンブルは、紅茶羊羹さんの z80asm の使用を想定しています。  
Z80プログラム制作にいつも活用させて頂いています。  

# 更新履歴
2019/06/30 Ver 1.0 公開  

